<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GeneticAlgoithm: Genetic Algorithm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GeneticAlgoithm
   </div>
   <div id="projectbrief">Implementation of the genetic algorithm</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Genetic Algorithm </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction: </h2>
<p>This project is a first of my new one-day-build mini-projects serie. It is my take on implementing a simple version of the Genetic Algorithm using C++, with a demo use case consisting of fitting a gaussian distribution to a data histogram.</p>
<p><br />
</p>
<h2>General Code Description: </h2>
<p>For a description of the code and compiling/running instructions, see <a class="el" href="md_README.html">Genetic Algorithm README</a>.</p>
<p><br />
</p>
<h2>Algorithms Description: </h2>
<p>The genetic algorithm consist of finding the best set of paramters for a given model using the following concepts (shamelessly stolen from the work of our mother nature over the last several billions of years):</p><ul>
<li><b>Population:</b> the genetic algorithm takes as input a population where each individual is a different instance of a configurable model and evolve it into a population of individuals that best represent the solution to a given problem.</li>
<li><b>Variability:</b> variation is at the center of the genetic algorithms: if we have only a handfull of ways to configure our model, the room for optimization towards a best solution would be limited. The configurations of the initial population are randomly chosen to allow the exploration of the full phase space of configurations.</li>
<li><b>Selection and cross-over:</b> Some of the individuals in the original population will be better fitted than others to answer the solution to our problem. A figure of merit is defined to provide a ranking of our population from the best to the least fitted. The next generation is then constructed by crossing over individuals selected among the best fitted from the current generation.</li>
<li><b>Mutations:</b> To maintain variability through the next generations, occasional mutations are introduced. These consist of randomoly introducing new features (i.e. new configurations not inherited from the parents), with a controlled rate.</li>
</ul>
<p>The genetic algorithm repeats the selection, cross-over and mutations steps until the best fitted individual reach a certain fitness threshold.</p>
<p><br />
 </p><h2>Implementation details: </h2>
<h3>The demo case:</h3>
<p>The demo case generates pseudo-random data following a gaussian distribution and uses the genetic algorithm to guess the parameters of the gaussian from the data. The results are then compared with a likelihood fitting method as implemented in the ROOT library.</p>
<p>To make this implementation reusable in future projects, abstract interfaces are used for the different elements: generic features are implemented in the interface base classes, while features that are specific to the demo case are implemented in derived classes.</p>
<h3>The Model:</h3>
<p>The model is what we are trying to optimize. In general, it is described by a set of properties that can have different values.</p><ul>
<li><b>The interface:</b> <code><a class="el" href="classIModel.html" title="Abstract class describing the interface for a model. ">IModel</a></code> is minimal since the details of the model are use-case specific. The only thing the interface knows about is the fact that a model can be scored.</li>
<li><b>The demo case:</b> <code><a class="el" href="classParametricModel.html" title="Class representing a model defined by a parametric function. ">ParametricModel</a></code> describes a parametric 1D formula of a gaussian distribution of the form: <p class="formulaDsp">
\[ f(x) = N e^{-\frac{(x-\mu)^2}{\sigma^2}} \]
</p>
 The implementation using ROOT's powerful <a href="https://root.cern.ch/doc/v610/classTF1.html">TF1</a> formula class allows our <a class="el" href="classParametricModel.html" title="Class representing a model defined by a parametric function. ">ParametricModel</a> sub-class to describe any formula in any number of dimensions and depending on any number of parameters, not to mention the possibility to draw a graph representing our model without the need for a lot of extra code.</li>
</ul>
<h3>The figure of merit:</h3>
<p>Sometimes it's called a fitness function: I prefer the term figure of merit over fitness function, because the latter suggest a function that increases with goodness (i.e. the higher the better) while there is no reason for this to always be the case. In fact, in our demo case example, a better \(\chi^2\) is a smaller one.</p><ul>
<li><b>The interface:</b> <code><a class="el" href="classIFigureOfMerit.html" title="Abstract class representing a figure of merit. ">IFigureOfMerit</a></code> provides placeholders for the following functionalities:<ul>
<li>Assign a score to a given model.</li>
<li>Given two scores, decides which is better.</li>
<li>Given a score, decides if it passes the acceptable threshold criteria.</li>
</ul>
</li>
<li><b>The demo case:</b> <code><a class="el" href="classChi2FitFigureOfMerit.html" title="Class implementing a  figure of merit. ">Chi2FitFigureOfMerit</a></code> uses a \(\chi^2\) over number of degrees of freedom estimator to compare a model with a given data set. A data set consists of \(N\) \((\vec{x_i}, y_i)\) pairs with an associated error \(\sigma_{y_i}\) on \(y_i\). The figure of merit is then given by: <p class="formulaDsp">
\[ \chi^2/nfd = \frac{1}{N}\sum_{i=0}^{N}\frac{(y_i - f(\vec{x_i}))^2}{\sigma_{y_i}^2} \]
</p>
</li>
</ul>
<h3>The population:</h3>
<p>The population defines a generation of models and controlls the way models are selected, crossed-over and mutated to build the next generation.</p><ul>
<li><b>The interface:</b> <code><a class="el" href="classIPopulation.html" title="Abstract class describing a population of models. ">IPopulation</a></code> already implements a large portion of the functionalities using the interfaces provided for the figure of merit and the model. This include tasks such as ranking the population and finding the best fitted individuals, selection based on this ranking, and handling the mutation rate.</li>
<li><b>The demo case:</b> <code><a class="el" href="classParametricModelPopulation.html" title="Implements a population of parametric models. ">ParametricModelPopulation</a></code> implements the details of initialization, cross-over and mutation:<ul>
<li>Initialization: the initial population is constructed using random values for the parameters withing a pre-defined range.</li>
<li>Cross-over: the cross-over of two individuals is achieved by passing on the values for each parameter randomly from one or the oher parent. Parents are selected such as the probability to give offspring depends linearly on the rank of the parent. Figure <a class="el" href="index.html#Fig1">Fig1</a> shows the probability vs rank for a population of 500. An exception is made to the best fitted individual which is always preserved intact in the next generation.</li>
<li>Mutation: the mutation is done by slightly modifying a randomly chosen parameter by adding a guassian noise component.</li>
</ul>
</li>
</ul>
<a class="anchor" id="Fig1"></a>
<table class="image" align="center">
<caption align="bottom">Fig.1: Probability for parents to give offspring as function of their rank within the population. </caption>
<tr>
<td><div class="image">
<img src="figures/C_ParentProb.png" alt="Test Parent Selection."/>
</div>
 </td></tr>
</table>
<h3>The algorithm:</h3>
<p>The <code><a class="el" href="classGeneticAlgorithm.html" title="Class imlementing the Genetic Algorithm. ">GeneticAlgorithm</a></code> class wraps everything above and controls the flow of the algorithm using the defined interfaces. It performs the following steps:</p><ul>
<li>Creates an initial population.</li>
<li>Rank the population.</li>
<li>Repeat the following until a solution is found or a maximum numeber of generations is reached:<ul>
<li>Select parents among the fittest individuals.</li>
<li>Cross them over to form a new population.</li>
<li>Mutate some individuals.</li>
<li>Rank the new population.</li>
</ul>
</li>
</ul>
<p><br />
 </p><h2>Results: </h2>
<p>An example output of the demo looks like this:</p>
<div class="fragment"><div class="line">Algorithm Configuration:</div><div class="line">  ==&gt; nmc = 10000</div><div class="line">  ==&gt; acceptThreshold = 0.85</div><div class="line">  ==&gt; mutateRate = 0.01</div><div class="line">  ==&gt; mutateSize = 0.1</div><div class="line">  ==&gt; maxGenerations = 10000</div><div class="line">  ==&gt; populationSize = 500</div><div class="line">Input parameters:</div><div class="line">  ==&gt; Constant : 0.173453  - range: [0.001, 1]</div><div class="line">  ==&gt; Mean : 1.5  - range: [-10, 10]</div><div class="line">  ==&gt; Sigma : 2.3  - range: [0.001, 10]</div><div class="line">Done after 27 generations.</div><div class="line">  ==&gt; Best score is: 0.830388</div><div class="line">After GA fit: </div><div class="line">  ==&gt; Constant : 0.173211</div><div class="line">  ==&gt; Mean : 1.50147</div><div class="line">  ==&gt; Sigma : 2.30937</div><div class="line">After Likelihood fit: </div><div class="line">  ==&gt; Constant : 0.173272</div><div class="line">  ==&gt; Mean : 1.50329</div><div class="line">  ==&gt; Sigma : 2.28956</div></div><!-- fragment --><a class="anchor" id="Fig1"></a>
<table class="image" align="center">
<caption align="bottom">Fig.1: Animation. </caption>
<tr>
<td><div class="image">
<img src="figures/C_anim.gif" alt="Fig.1: Animation showing the convergence of the genetic algorithm."/>
</div>
 </td></tr>
</table>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
